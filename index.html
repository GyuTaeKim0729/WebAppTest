<!doctype html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>앱 설치 테스트</title>
</head>
<script type="text/javascript">

    var launchAppUrl = 'naversearchapp://'; // 앱 스키마
    var timer;	// 타이머
    var schInterval; // 인터벌

    function init() {
        location.href = launchAppUrl;

        schInterval = setInterval(intervalSch, 500);

        timer = setTimeout(function () {
            alert('앱이 설치되어있지 않습니다.');
            clearInterval(schInterval);
        }, 5000);
        document.addEventListener("visibilitychange", function () {
            clearTimer();
            alert("앱이 설치 되어 있습니다.");
        });
    }

    function clearTimer() {
        clearInterval(schInterval);
        clearTimeout(timer);
    }

    function intervalSch() {
        // 매 인터벌 마다 웹뷰가 활성화 인지 체크
        if (document.webkitHidden || document.hidden) {// 웹뷰 비활성화
            clearTimer();// 앱이 설치되어있을 경우 타이머 제거
            //alert("앱이 설치 되어 있습니다.");
        } else {	// 웹뷰 활성화
            console.log("타이머 동작");
        }
    }


</script>

<body onload="init()">

</body>

</html>
